<p id="notice"><%= notice %></p>

<p><b>
  <b>User:</b>
  <%= @status_update.user.name %>
</b></p>
<p>
  <b>Body:</b>
  <%= @status_update.body %>
</p>

<p>
  <b>Timestamp:</b>
  <%= @status_update.timestamp %>&nbsp;&nbsp;<%= link_to 'Like', new_status_update_like_path(@status_update) %> | <%= link_to 'Edit', edit_status_update_path(@status_update) %>
</p>
<table>
<h3>Comments</h3>
	<% @status_update.comments.each do |comment| %>
  <p>
    <tr>
			<td><b><%= comment.user.name %>: </b></td>
			<td><%= comment.body %></td>
			<td><%= comment.timestamp %> | </td>
			<td><%= link_to 'Like', new_status_update_comment_like_comment_path(@status_update, comment) %></td>
			<% if current_user.id == comment.user_id || current_user.id == @status_update.user_id %>
				<td> | <%= link_to 'Delete', [comment.status_update, comment],
               :confirm => 'Are you sure?',
               :method => :delete %></td>
      <% end %>
    </tr>
  </p>
<% end %>
</table>

<h3>Add a comment:</h3>
<%= form_for([@status_update, @status_update.comments.build]) do |f| %>
	<div class="field">
    <%= f.hidden_field(:status_update_id, :value => @status_update.id) %>
  </div>
  
  <div class="field">
    <%= f.hidden_field(:user_id, :value => current_user.id) %>
  </div>

  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </div>
  <div class="field">
    <%= f.hidden_field(:timestamp, :value => Time.now) %>
  </div>
  <div class="actions">
    <%= f.submit :value => "Comment" %>
  </div>
<% end %>

<%= link_to 'Back', status_updates_path %>
